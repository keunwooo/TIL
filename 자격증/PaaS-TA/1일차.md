# 1일차



클라우드 컴퓨팅 

컴퓨팅 리소스를 데이터센터에 대량으로 집적시킨 후, 개별 이용자가 요구하는 만큼 가상으로 분리하여 정보통신망을 통해 제공하는 서비스



클라우드 특징

1. 주문형 셀프 서비스 : 사업자와 직접 상호 작용하지 않고, 사용자의 개별 관리화면을 통해 서비스 이용
2. 광범위한 네트워크 접속 : 다양한 디바이스 통해 서비스 접속
3. 리소스 공유 : 사업자의 컴퓨팅 리소스를 여러 사용자가 공유하는 형태로 이용
4. 신속한 확장성 : 스케일업, 스케일 다운
5. 측정 가능한 서비스 : 이용한 만큼 요금 부가(종량제)



클라우드 유용성

1. 경제성
2. 유연성
3. 가용성
4. 빠른 구축 속도



국내 PaaS 시장이 상대적으로 작아 투자를 기피하는 경향



에지 컴퓨팅 : 사용자 디바이스 가까운 곳에 정보소스, 저장소를 배치하여 정보를 처리하고 콘텐츠를 수집,전달

분산 클라우드: 클라우드 제공 업체의 데이터센터 외부에 있는 다른위치에서 퍼블릭 클라우드 서비스 제공

기존 중앙 집중방식 퍼블릭 클라우드 서비스를 소비자와 가장 가까운 곳에서 제공 ( 자율주행 자동차 등 이동하는 단말에서 효과적)



---

Cloud Model

1. IaaS 서버를 운영하기 위해 서버 자원, 스토리지 등 인프라 구축된거 Azure,GCP,OpenStack 
2.  PaaS 서비스를 개발하기 위한 안정적인 환경과 API 등
3.  SaaS 클라우드환경에서 동작하는 응용프로그램을 서비스 형태로 제공하는 것 메일,office365 등 



기타

CaaS 컨테이너 관점 , FaaS 서비스 관점

설치형 S/W (IaaS)

서비스형 S/W (CaaS, PaaS, FaaS (Function))

마켓 플레이스 (SaaS)



SaaS - 데이터, 웹 서비스, 웹 오피스

PaaS - 개발 프레임워크, Middleware, OS

IaaS - server, storage, Network



PaaS 장점

1. 비용절감
2. 유지 관리 하지 않음
3. 높은 안정성
4. 무제한에 가까운 확장성



PaaS 종류 - 하이브리드

1. 제어
2. 유연성
3. 비용 효율성
4. 용이성



PaaS 종류 - Private

1. 유연성 향상 - 특정 비즈니스 요구 사항을 만족하기 위해 클라우드 환경을 사용자 지정할 수 있음
2. 보안 강화
3. 높은 확장성 - 사설 클라우드지만 여전히 공용처럼 확장성과 효율성 제공



IaaS 자원 위에 여러 인스턴스들의 유기적인 조합으로 PaaS 동작



Diego Cell?

Garden 이랑 비슷함. 

배포 명령 실행 -> Diego 컨테이너 생성 -> 애플리케이션 코드 배치 -> 적합한 Buildpack 찾기 -> 컴파일 진행



Droplet Archive?

Application이 동작할 수 있는 부가 요소를 모두 갖춘 형태 -> BlobStore에 저장



BuildPack 

언어별 프로그램이 동작 할 수 있도록 언어 프레임워크등의 기술지원



ORG 

개인 또는 여러 공동작업자가 소유하고 사용 할 수 있는 개발계정

각 계정은ORG에 롤을 부여 받을 수 있음



Space

모든 애플르케이션 및 서비스의 범위가 공간으로 지정

공유 위치에 대한 액세스 제공 ORG는 여러 스페이스를 포함 가능 스페이스로 범위 제공

oRG는 리소스 엑세스 제어(쿼터 제한)



BOSH

IaaS 환경에서 Stemcell, Deployment, Releas를 이용하여 VM들을 관리



---

SaaS

성숙된 SaaS는 Multi Tenant, Configuration, Scalability 충족



레벨4 -> 부하분산 시스템에서 모든 고객을 지원하는 가장 성숙한 모델

고객의 데이터를 분산 관리



주문형 SW 또는 서비스형 SW, SW 및 관련 데이터를 중앙에서 관리하고 인터넷을 통해 접속하는 사용자에게 SW를 이용할 수 있도록 하는 모델, 필요한 만큼만 이용하고 요금을 지불



환경설정 (Configuration) - 소스코드의 수정 없이 사용자의 요구사항 수용

다중 사용자 지원(Multi Tenant) - 하나의 어플리케이션을 다수의 사용자(Tenant)가 공유하여 사용하는 다중 소유 아키텍처

 확장성(Scalability) 가상화,분산병렬 처리 등을 통해 확장성 있는 서비스를 제공



클라우드 SaaS

SaaS 마켓플레이스에서 사용자의 테넌트에 SaaS 설치 및 독립적인 이용 사용자의 요구사항에 따라 커스텀 됨.



PaaS는 컨테이너를 기반으로 한 미들웨어 성격의 클라우드 서비스로 SaaS를 지원한다. 

SaaS는 PaaS 위에서 개발,실행,유통 과금 등 라이프사이클을 지원하는 응용 생태계 플랫폼



3-tier Application 구성

Client - Monolithic Application - Database



1. Native application - 특정 플랫폼이나 디바이스에서 사용되도록 개발
2. Web application - 플랫폼이나 디바이스에 상관 없이 사용되도록 개발
3. Cloud application - 클라우드 환경에서 실행되는 어플리케이션 프로그램, 종속 x, 쉽게 업데이트 가능, desktop,web apps의 휴대성 모두 제공



Cloud Native Application의 핵심은 '서비스'

최소의 상태(StateLess), 컴포넌트들이 격리된 상태의 서비스로 구성(마이크로 서비스), 각각의 서비스는 분산되고 탄력적이며 수평적 확장성 있는 시스템으로 구성



12-factor 기반의 방법론

멀티테넌트 DB 아키텍처 사용

셀프서비스 Agile/Scrum 방법론 사용



마이크로서비스 

아키텍처를 구성하기 위한 핵심 요소

1. 서비스 - 각 컴포넌트는 서비스라는 형태로 구현되고 API를 이용하여 타 서비스와 통신 , 서비스 경계는 구문 또는 도메인 경계를 따름
2. DevOps - 개발,테스트,배포를 모두 자동화 시켜 개발 사이클이 끊임없이 순환되도록 함
3. 데이터 분리
4. API Gateway - 모든 api에 대한 end point를 통합하고, 몇가지 추가적인 기능을 제공하는 미들웨어
   - EndPoint 통합과 토폴로지 정리
   - Orchestration : 여러 개의 서비스를 묶어서 하나의 서비스 생성
   - 공통 기능 처리 : API 인증, Logging 등
   - Mediation : 메시지 포맷 변환, 프로토콜 변환, 메시지 라우팅 등



1. 보다 빠르고 간단한 배치와 롤백
2. 각 도메인에 적합한 프레임워크/도구/언어
3. 더 큰 탄력성
4. 더 나은 가용성



장점

1. Resilence - 오류 발생 시 복구될때까지 요청 가능 서비스에서 제외

2. Scaling - 서비스들은 서로 독립적이라 타 서비스에 영향주지 않고 서비스 단위로 확장, X축 확장(멀티 애플리케이션 확장), Y축 확장 (Sharding, Partioning)으로 불리는 확장을 독립적으로 수행

등



단점

1. 복잡성

2. 중복성

3. 테스트하기 까다로움

4. 오버헤드 

   등



고려사항

1. 서비스 범위 설정 문제
2. 레거시 시스템과의 공존에 대한 고려
3. 운영 오버헤드
4. 인터페이스 불일치



모델링/구현 TIp

1. API 정의
2. API를 REST API Maturity Level 2 이상이 되도록 강제화
3. API 문서 유지
4. ORM 활용
5. DB에 너무 의존x
6. 의미있는 값 노출 금지



API Gateway

- 소프트웨어가 서로 의사소통을 하는 규약
- 특정한 task가 수행되는 방법을 표현
- 일반적 의미로는 운영체제, 어플리케이션, 라이브러리 등 다양한 수준의 인터페이스를 총칭
- REST-API 와 같은 표준화된 방식의 API를 사용하여 각 서비스/어플리케이션 간의 통신
- 표준화된 통신 방식을 사용하기 때문에 각 서비스의 구현은 PolyGlot Programming과 같이 다양한 방향으로 구현 가능



API 게이트웨이는 API 서버 앞단에서 모든 API 서버들이 엔드포인트를 단일화하여 묶어주고 API에 대한 인증과 인가 기능에서 부터 메시지에 따라서 여러 서버로 라우팅하는 고급기능까지 많은 기능을 담당

ESB와의 관계

SOA:ESB = MSA:API 게이트웨이

ESB: API Gateway로 발전 ESB의 대부분의 컨셉을 많이 승계



주요기능

1. 인증/인가에 관련된 기능
   - API 토큰 발급
   - 엔드 포인트별 API 호출 인증
   - 엔드 포인트별 API 요청 인가
2. API 라우팅
   - 백엔드 API 서버로의 로드 밸런싱
   - 서비스와 클라이언트 별 엔드 포인트 제공
   - 메시지 또는 헤더기반 라우팅

3. 메디에이션 기능
   - 메시지 포맷 변환
   - 프로토콜 변환
   - Message Exchange Pattern
   - Aggregation

4. Logging/미터링
   - API 호출 로깅
   - API 미터링 & 차징
   - 사용 고객의 등급에 따른 서비스 레벨 조정