# Docker 및 k8s 에 들어가기 전에



- 하이퍼바이저란?

> [가상 머신(Virtual Machine, VM)](https://www.redhat.com/ko/topics/virtualization/what-is-a-virtual-machine)을 생성하고 구동하는 소프트웨어입니다. 가상 머신 모니터(Virtual Machine Monitor, VMM)라고도 불리는 하이퍼바이저는 하이퍼바이저 운영 체제와 가상 머신의 리소스를 분리해 VM의 생성과 관리를 지원합니다.

 

- 하이퍼바이저 유형 1

>  네이티브 또는 베어 메탈 하이퍼바이저라고도 불리는 유형 1 하이퍼바이저는 호스트의 하드웨어에서 직접 구동되어 게스트 운영 체제를 관리합니다. 호스트 운영 체제 대신 VM 리소스는 하이퍼바이저에 의해 하드웨어에 직접 예약됩니다. 

>  이러한 유형의 하이퍼바이저는 엔터프라이즈 데이터 센터와 서버 기반 환경에서 가장 일반적으로 사용됩니다.

> KVM, Microsoft Hyper-V, VMware vSphere가 유형 1 하이퍼바이저의 예입니다. KVM은 2007년에 Linux 커널로 통합되었으므로 현대적인 버전의 [Linux](https://www.redhat.com/ko/topics/linux)를 사용하는 경우 이미 KVM 액세스 권한을 갖고 있습니다. 



- 하이퍼바이저 유형2

> 호스트 하이퍼바이저라고도 불리는 유형 2 하이퍼바이저는 기존의 운영 체제에서 소프트웨어 레이어 또는 애플리케이션으로서 구동됩니다.

> 호스트 운영 체제에서 게스트 운영 체제를 추상화하는 방식으로 작동합니다. VM 리소스는 호스트 운영 체제에 따라 예약된 후 하드웨어에 대해 실행됩니다. 

> 유형 2 하이퍼바이저는 개인 컴퓨터에서 여러 개의 운영 체제를 구동하려는 개인 사용자에게 이상적입니다. 

> VMware Workstation과 Oracle VirtualBox는 유형 2 하이퍼바이저의 예입니다. 



- VM 과 Container의 차이점. 구동방식이 어떻게 다른가? 

> 하이퍼바이저는 VM에서 다양한 운영 체제를 구동할 수 있도록 허용하지만, 컨테이너는 단일한 유형의 운영 체제만 구동할 수 있습니다. 예를 들어, Linux 서버를 구동 중인 컨테이너의 경우, Linux 운영 체제만 구동할 수 있습니다. 



- VM

> VMware, VirtualBox와 같이 Host OS위에 Guest OS를 가상화 하는 방식입니다. 예전에는 Guest OS 전체를 가상화하였습니다. 사용법이 간단하지만 무겁고 느려서 운영환경에 적용하기는 어려웠습니다. 그래서 현재는 Xen과 같은 반가상화 방식으로 구성되고 있습니다.



- Container

> 이와 같이 가상화하는 방식은 무겁고 성능 문제가 발생하기에 프로세스를 격리하는 방안이 등장 하였습니다.



> VM은 하이퍼바이저 위에 Guest OS가 올라가는데 그 위에 Binary와 라이브러리 등을 모두 구성해야 하기에 무겁고 성능저하가 발생합니다. (오버헤드 발생) 그런데 도커의 경우에는 하이퍼바이저가 필요 없고 도커엔진만 있으면 그 위에 어플리케이션과 바이너리 및 라이브러리가 포함된 컨테이너만 올리면 되는 구성입니다. 정리하면 OS의 자원인 커널을 공유하지만 어플리케이션 단위로 추상화하여 서로 격리하는 형태입니다